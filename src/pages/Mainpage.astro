<script>
  import Konva from "konva";

    // Initialize stage and layer
    var stage = new Konva.Stage({
      container: "container",
      width: window.innerWidth,
      height: window.innerHeight,
    });

    var layer = new Konva.Layer();
    stage.add(layer);

    function drawDeck(inputStr) {
      var values = inputStr.split(",").map((value) => value.trim());
      var x = 20; // Starting X coordinate
      var y = 20; // Starting Y coordinate
      var currentAngle = 0; // Starting angle in degrees

      for (var i = 0; i < values.length; i += 2) {
        var length = parseFloat(values[i]);
        var angle = parseFloat(values[i + 1]);

        // Convert angle to radians
        var angleRadians = ((currentAngle + angle) * Math.PI) / 180;

        // Calculate new endpoint coordinates
        var newX = x + length * Math.cos(angleRadians);
        var newY = y + length * Math.sin(angleRadians);

        // Draw line
        var line = new Konva.Line({
          points: [x, y, newX, newY],
          stroke: "black",
          strokeWidth: 2,
        });
        layer.add(line);

        // Update current position and angle for the next segment
        x = newX;
        y = newY;
        currentAngle += angle;
      }

      // Redraw layer
      layer.draw();
    }

    // // Example usage:
    // var userInput = prompt(
    //   "Enter lengths and angles separated by commas (e.g., '12, 0, 30.5, 90, 16.25, 45'):"
    // );
    // drawDeck(userInput);

  const button = document.getElementById("draw-button");

  button.addEventListener("click", () => {
    drawDeck('12, 0, 30.5, 90, 16.25, 45');
  });

  // const form = document.getElementById("form")
  // form.addEventListener('submit', (e) => {
  //   e.preventDefault()
  //   drawDeck()
  // })
</script>

<style>
  canvas {
    border: 2px solid black;
  }
</style>

<div id="container" class="w-full h-full"></div>
